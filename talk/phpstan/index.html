<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>Analyse statique avec PHPStan</title>
        <link rel="icon" type="image/png" href="favicon.png" />
    </head>
    <body>
        <div class="reveal">
            <div class="slides"
            >
                <section
                    data-background-image="images/pirates/IMG_20181209_120209.jpg"
                    data-background-size="cover"
                    data-background-opacity="0.3"
                    >
                    <h2 data-trans-en="Explore your code with static analysis">
                        Explorez votre code avec de l'analyse statique
                    </h2>

                    <p>
                        <a href="https://julien.deniau.me/phpstan/"
                           target="_blank"
                           rel="noopener noreferer">
                            üîó https://julien.deniau.me/phpstan/
                        </a>
                    </p>
                </section>

                <section>
                <section id="my-name-is"
                    data-background-image="images/pirates/IMG_20181209_120653.jpg"
                    data-background-size="cover"
                    data-background-opacity="0.3"
                >
                <p data-trans-en="My name is Julien Deniau">Je m'appelle Julien Deniau</p>
                    <p>
                        <span data-trans-en="I'm an old">
                            Je suis un vieux‚Ä¶
                        </span>
                        <span class="fragment fade-left" style="display: inline-block;" data-trans-en="developper">
                            codeur
                        </span>
                    </p>
                </section>

                <section
                    data-background-image="images/pirates/IMG_20181209_121329.jpg"
                    data-background-size="cover"
                    data-background-opacity="0.3"
                >
                    <p data-trans-en="I did code for the first time:">J'ai cod√© mes premiers sites :</p>
                    <ul>
                        <li data-trans-en="on membres.lycos.fr">sur membres.lycos.fr</li>
                        <li data-trans-en="in PHP 3">en PHP 3</li>
                        <li data-trans-en="with Macromedia Dreamweaver">avec Macromedia Dreamweaver</li>
                    </ul>

                    <aside class="notes">
                        <span data-trans-en="PHP 4 was released in may 2000">Sortie de PHP 4 : Mai 2000</span><br />
                        <span data-trans-en="PHP 5 was out in july 2004">Sortie de PHP 5 : Juillet 2004</span>
                    </aside>
                </section>

                <section id="aventure"
                    data-background-image="images/pirates/IMG_20181209_120404.jpg"
                    data-background-size="cover"
                    data-background-opacity="0.3"
                >
                    <ul>
                        <li data-trans-en='no ".h" files from C language'>Pas de fichier ".h" du C</li>
                        <li data-trans-en='no `System.out.println()` from Java'>Pas de `System.out.println()` du Java</li>
                        <li>
                            <pre><code class="hljs php" data-trim data-noescape>
                                echo '&lt;html&gt;'; // <span data-trans-en='here we go!'>et c'est parti !</span>
                            </code></pre>
                        </li>
                    </ul>

                    <h3 class="fragment">
                        <br />
                        <span data-trans-en="Well, PHP was adventure!"> Bref, PHP c'√©tait l'aventure !</span>
                    </h3>
                </section>
                </section>

                <section>
                <section
                    id="israel"
                    data-background-image="images/assassins-creed-jerusalem.jpg"
                    data-background-size="contain"
                >
                    <!--
                    -->
                    <blockquote style="background: rgba(255, 255, 255, 0.8)">
                        Parse error: syntax error, unexpected T_PAAMAYIM_NEKUDOTAYIM
                    </blockquote>

                    <aside class="notes">
                        <p data-trans-en="OK, some times we needed to understand this">Bon c'est vrai, des fois il fallait comprendre √ßa</p>
                        <span data-trans-en="Feel like Alta√Ør in Assassin's creed">L'impression d'√™tre Alta√Ør dans Assassin's Creed</span><br />

                        <br />
                        <i>
                            <span data-trans-en="Official name of the Scope Resolution Operator (::) used to access static member or constant of a class.">
                                Nom officiel de l'op√©rateur de r√©solution de port√©e (::) utilis√© en PHP pour acc√©der aux membres statiques ou constants d'une classe.
                            </span><br />
                            <span data-trans-en="Usage syntax is `Class::Element`">
                                Il s'utilise par la syntaxe `Classe::Element`
                            </span>
                        </i>
                    </aside>

                </section>

                <section
                    id="unexpected-variable"
                    data-background-image="images/indi-x.jpg"
                    data-background-size="contain"
                >
                    <blockquote style="background: rgba(255, 255, 255, 0.8)">
                    PHP Parse error: syntax error, unexpected '$a' (T_VARIABLE) on line 6
                    </blockquote>
                    <aside class="notes" data-trans-en="What fun did we had to find out that in fact, we should have looked at line 5 from the start">
                        Quel plaisir de fouiller pour trouver qu'en fait, il fallait regarder la ligne 5 !
                    </aside>
                </section>

                <section
                    id="freedom"
                    data-background-image="images/tomb-raider.png"
                    data-background-opacity="0.4"
                    data-background-size="contain"
                >
                    <h2 data-trans-en="But the freedom of the language was so beautifull‚Ä¶">Mais la libert√© du langage √©tait tellement belle‚Ä¶</h2>
                </section>

                <section
                    data-background-image="images/pirates/IMG_20181209_120837.jpg"
                    data-background-size="cover"
                    data-background-opacity="0.3"
                >
                        PHP Fatal error: Uncaught Error:<br />
                        Call to a member function getTitle() on null
                    
                    <aside class="notes"
                           data-trans-en="OK, after 10 years of adventures, some PHP version, and some code lines later, I did understand that I was not an adventurer"
                    >
                        oui bon OK, ap 10 ans d'aventures, quelques versions de PHP, et quelques lignes de codes plus tard, je me suis rendu compte que je n'√©tais pas un aventurier
                    </aside>
                </section>
                </section>

                <section>
                <section
                    id="compas"
                    data-background-image="images/pirates/map.png"
                    data-background-size="contain"
                    data-background-opacity="0.2"
                >
                    <p>
                        üëç 
                        <span data-trans-en="travel">voyager</span>
                    </p>
                    <p>
                        ‚ô•
                        <span data-trans-en="with a map">avec une carte</span>
                    </p>
                    <aside class="notes" data-trans-en="I love travel, but I like having a map to guide me">
                        J'aime voyager, mais j'aime avoir une carte pour me guider
                    </aside>
                </section>

                <section
                    data-background-image="images/pirates/IMG_20181209_120857.jpg"
                    data-background-size="cover"
                    data-background-opacity="0.3"
                >
                    <p>
                         üëç
                         <span data-trans-en="discover">d√©couvrir</span>
                    </p>
                    <p>
                    ‚ô•
                    <span data-trans-en="understand with a dictionnary">comprendre avec un dictionnaire</span>
                    </p>
                    <aside class="notes" data-trans-en="I love to discover, but I like a dictonnary to understand">
                        J'aime d√©couvrir, mais j‚Äôappr√©cie avoir un dictionnaire pour comprendre
                    </aside>
                </section>
                <section
                    id="manuel"
                >
                    <p>
                        üëç
                        <span data-trans-en="build">construire</span>
                    </p>
                    <p>
                        ‚ô•
                        <span data-trans-en="manual">manuel</span>
                    </p>
                    <p>
                    <img src="images/ikea.jpg" />
                    </p>
                </section>
                </section>

                <section>
                <section id="explorer"
                    data-background-image="images/pirates/IMG_20181209_120537.jpg"
                    data-background-size="cover"
                    data-background-opacity="0.3"
                >
                    <h3>
                        <p>
                        <strike data-trans-en="I am a adventurer">
                            Je suis un aventurier
                        </strike>
                        </p>
                        <p data-trans-en="I am an explorer">
                            Je suis un explorateur.
                        </p>
                    </h3>

                </section>

                <section
                    data-background-image="images/pirates/IMG_20181209_120450.jpg"
                    data-background-size="cover"
                    data-background-opacity="0.3"
                >
                    <p>
                    <strong data-trans-en="Adventuter:">Aventurier :</strong> <span data-trans-en="alone with his bare hands">seul avec ses bytes et son couteau</span>
                    </p>
                    <p class="fragment">
                    <strong data-trans-en="Explorer:">Explorateur :</strong> <span data-trans-en="Go search with the right tools">aller fouiller avec les outils adapt√©s</span>
                    </p>
                </section>
                </section>

                <section>
                    <section id="tests"
                        data-background-image="images/pirates/IMG_20181209_121122.jpg"
                        data-background-size="cover"
                        data-background-opacity="0.2"
                    >
                        <h2 data-trans-en="Tools">Les outils<br /></h2>
                        <div class="round-container">
                            <div class="round-tests">
                                Tests
                            </div>
                            <div class="round-blank"></div>
                        </div>
                        <aside class="notes">
                            <ul>
                                <li data-trans-en="Tests are usefull to check that a system is working"> Les tests servent √† valider qu'un syst√®me fonctionne
                                <li data-trans-en="They prevent regressions"> Ils √©vitent les r√©gressions
                                <li data-trans-en="They should not be used to test code that would not compile in other languages (test that an error is throwned if we send `null` or a wrong type)">
                                    Ils ne doivent pas servir √† tester du code qui ne compilerait m√™me pas dans un autre langage (tester qu'une erreur est bien retourn√©e si on envoie `null` ou le mauvais type)
                                <li data-trans-en="PHP is permissive, but can create weird comportments, or a huge number of useless lines"> PHP est "permissif", mais peut du coup amener des comportements √©trange, ou bien un grand nombre de ligne de code inutile
                            </ul>
                        </aside>
                    </section>

                    <section
                        data-background-image="images/pirates/IMG_20181209_120918.jpg"
                        data-background-size="cover"
                        data-background-opacity="0.3"
                    >
                        <p data-trans-en="PHP 7: more strict langage, static types">PHP 7 : structuration du langage, typage statique</p>
                        <p data-trans-en="No more unknown parameters in functions!">Plus de m√©thode avec param√®tre inconnu !</p>
                        <div class="fragment">
                            <br />
                            <pre><code class="hljs shell" data-trim>
                                Type error: Argument 1 passed to slugify()
                                must be of the type string or null, integer given
                            </code></pre>
                            ‚Üì
                            <div data-trans-en="Fatal in production!">
                                Fatal en prod !
                            </div>
                        </div>

                        <aside class="notes">
                            <div data-trans-en="As far as PHP go, the language become more strict,">
                                Au fur et √† mesure des versions de PHP, le langage se "structure" de plus en plus,
                            </div>
                            <div data-trans-en="and embed static types.">
                                et int√®gre du typage statique.
                            </div>
                            <div data-trans-en="That's good news! No more unknown parameters in function calls‚Ä¶">
                                C'est bien ! Plus de m√©thode avec param√®tres inconnu...
                            </div>
                            <br />
                            <div data-trans-en="`Type error` ‚Üí Fatal in production!">
                                `Type error` ‚Üí Fatal erreur en prod !
                            </div>
                        </aside>
                    </section>
                </section>

                <section id="tools"
                    data-background-image="images/pirates/IMG_20181209_121122.jpg"
                    data-background-size="cover"
                    data-background-opacity="0.2"
                >
                    <h2 data-trans-en="Tools">Les outils<br /></h2>
                    <div class="round-container">
                        <div class="round-tests">
                            Tests
                        </div>
                        <div class="round-phpstan">
                            <div data-trans-en="Static">Analyse</div>
                            <div data-trans-en="Analysis">statique</div>
                        </div>
                    </div>
                </section>

                <section id="static-analyzer">
                    <section>
                        <ul>
                            <li data-trans-en='Analysis: "read" the code,'>Analyseur : Il "lit" le code,
                            <li data-trans-en="Static: Does not execute the program">Statique : il n'ex√©cute pas le programme
                        </ul>
                    </section>

                    <section>
                        <h2 data-trans-en="Tens of satic analysis tools">Des dizaines d'analyseurs statiques</h2>
                        <div> 
                            <img data-src="images/github-mark.png" width="150px" class="image-like-text" />
                            <a href="https://github.com/exakat/php-static-analysis-tools" rel="noopener noreferer" target="_blank">
                                exakat/php-static-analysis-tools
                            </a>
                        </div>
                        <aside class="notes">
                            <ul>
                                <li data-trans-en="Dead code, bug detection,"> D√©tection de code mort, de bugs,
                                <li data-trans-en="linters"> linter,
                                <li data-trans-en="code standard"> standard de code,
                                <li data-trans-en="metrics"> m√©triques,
                                <li> etc.
                            </ul>
                        </aside>
                    </section>

                    <section id="phpstan"
                    data-background-image="images/pirates/IMG_20181209_120716.jpg"
                    data-background-size="cover"
                    data-background-opacity="0.3"
                    >
                        <h2>PHPStan</h2>
                        <h3>PHP Static Analysis Tool</h3>
                        <p>
                            <img data-src="images/github-mark.png" width="50px" class="image-like-text" />
                            <a href="https://github.com/phpstan/phpstan" rel="noopener noreferer" target="_blank">
                                phpstan/phpstan
                            </a>
                        </p>
                    </section>

                    <section
                        data-background-image="images/pirates/IMG_20181209_120154.jpg"
                        data-background-size="cover"
                        data-background-opacity="0.3"
                    >
                        <h2 data-trans-en="PHPSTan is not:">PHPStan n'est pas</h2>
                        <ul>
                            <li data-trans-en="A test framework">Un framework de test,
                            <li data-trans-en="Code that did execute">Du code qui s'ex√©cute,
                            <li data-trans-en="Magic: it does not guess what you don't tell him">Magique : il ne devine pas ce que vous ne lui dites pas
                        </ul>

                        <aside class="notes">
                        <ul>
                            <li>
                                <span data-trans-en="A test framework (unit, functional, etc.)">Un framework de test (unitaire, fonctionnel, ou autre),</span><br />
                                <span data-trans-en="In fact, it will allow you to detect bugs without writing any more tests">D'ailleurs, il va vous permettre de trouver des bugs sans √©crire de tests suppl√©mentaire</span>
                            <li data-trans-en='Code that did execute (you wait for a string, you send an array, it will not take over to send an exception before the PHP fatal error)'>
                                Du code qui s'ex√©cute (vous attendez un string, vous envoyez un tableau, il ne va pas "prendre la main" pour envoyer une exception avant la fatal PHP),
                            <li data-trans-en="Magic: it does not guess what you don't tell him">Magique : il ne devine pas ce que vous ne lui dites pas
                        </ul>
                        </aside>
                    </section>

                    <section>
                        <pre><code class="hljs php" data-trim data-noescape>class Foo {
    <span class="fragment highlight-red" data-fragment-index="3">private $bar; <span class="fragment" data-fragment-index="3" data-trans-en='// considered as "@mixed"'> // consid√©r√© comme "@mixed"</span></span>
    
    public function __construct(array $bar) {
        $this->bar = $bar;
    }
    
    public function getBar() {
        return strtoupper($this->bar);
    }
}

$foo = new Foo(['io']);
$foo->getBar();</code></pre>
                        <div class="fragment success" data-fragment-index="1">
                            [OK] No errors
                        </div>
                        <div class="fragment error" data-fragment-index="2">
PHP Warning:  strtoupper() expects parameter 1 to be string, array given
                        </div>
                        <aside class="notes" data-trans-en="PHPStan won't send an error because $bar is consider as `mixed`">
                            PHPStan ne va pas vous remonter d'erreur car $bar est consid√©r√© comme `mixed`
                        <aside>
                    </section>

                    <section id="typed-property">
                        <pre><code class="hljs php" data-trim data-noescape>class Foo {
    /**
     * @var <span class="fragment highlight-red" data-fragment-index="1">array</span>
     */
    private $bar;
    
    public function __construct(array $bar) {
        $this->bar = $bar;
    }
    
    public function getBar() {
        return <span class="fragment highlight-red" data-fragment-index="1">strtoupper($this->bar)</span>;
    }
}

$foo = new Foo(['io']);
$foo->getBar();</code></pre>
                        <div class="fragment error" data-fragment-index="1">
                            [ERROR] Parameter #1 $str of function strtoupper expects string, array given.
                        </div>
                        <aside class="notes" data-trans-en="But if $bar is marked as an array, then you will get an error.">
                            Par contre si $bar est typ√© comme un tableau, alors l√† vous allez avoir une erreur.
                        <aside>
                    </section>
                </section>

                <section>
                    <section>
                        <h2 data-trans-en="Compilation errors">Les erreurs "de compilation"</h2>
                    </section>

                    <section id="compile-errors">
                        <pre><code class="hljs php" data-trim data-noescape>function sayHello(<span class="fragment highlight-red" data-fragment-index="1">string</span> $who): string {
    return 'Hello ' . strtoupper($who);
}

$julien = new User('julien');

sayHello($julien);
                        </code></pre>

                        <div class="fragment error" data-fragment-index="1">
                            [ERROR] Parameter #1 $who of function sayHello expects string, User given.
                        </div>
                    </section>

                    <section id="wrong-interface-call">
                        <h4 data-trans-en="Wrong called functions">Mauvaise fonction appel√©e</h4>
                        <pre><code class="hljs php" data-trim data-noescape>interface FooInterface {}

class Foo implements FooInterface {
  public function bar() {
    // do stuff
  }
}

function dumpFoo(FooInterface $fooInterface) {
  <span class="fragment highlight-red" data-fragment-index="1">return  $fooInterface->bar();</span>
}

$foo = new Foo();
dumpFoo($foo);</code></pre>

                        <div class="fragment error" data-fragment-index="1">
                            [ERROR] Call to an undefined method FooInterface::bar().
                        </div>

                        <aside class="notes">
                            <span data-trans-en="It knows that you are trying to call a function that is now defined in an interface">
                                Il sait tr√®s bien remonter des erreurs quand vous appelez des fonctions qui ne sont pas d√©finit dans une interface par exemple.
                            </span>

                            <br />
                            <br />
                            <span data-trans-en="This example seems silly because it is too simple, but you probably have this kind of case in your code ">
                            L√† l'exemple parait "bidon" car il est simplifi√©, mais il est probable que vous ayez ce genre de cas dans votre code
                            </span>
                        <aside>
                    </section>

                    <section id="wrong-interface-call-doctrine">
                        <h4 data-trans-en="Wrong called functions">Mauvaise fonction appel√©e</h4>
                        <pre><code class="hljs php" data-trim>use Doctrine\Common\Persistence\ObjectManager;

function doStuff(ObjectManager $entityManager)
{
  return $entityManager->createQueryBuilder()
    ->from('SomeEntity', 'a')
    ->where('a.id = 8')
    ->getResult();
}</code></pre>
                        <div class="fragment">
                            <div>
                                <span data-trans-en="An">Un</span>
                                <code>ObjectManager</code>
                                <span data-trans-en="does not have a">n'a pas de m√©thode</span>
                                <code>createQueryBuilder</code>
                                <span data-trans-en="method"></span>.
                            </div>
                            <div>
                                <span data-trans-en="This method belongs to">Cette m√©thode fait partie de</span>
                                <code>Doctrine\ORM\EntityManagerInterface</code>
                            </div>
                        </div>

                        <aside class="notes">
                            <span data-trans-en="It is less trivial if you use an external library, like Doctrine for example.">
                                C'est nettement moins trivial quand on utilise une librairie externe, Doctrine par exemple.
                            </span><br />
                            <span data-trans-en="or in a complex business logic">
                                ou bien un code m√©tier complexe.
                            </span><br />
                            <br />
                            <span data-trans-en='Having a "clean" code will allow you to "change" things really easily, without having to (re-)understand your tests'>
                                Le fait d'avoir un code "propre" vous permettra de "changer" des choses tr√®s facilement, sans avoir √† (re)comprendre des tests
                            <span>
                        <aside>
                    </section>
                </section>

                <section>
                    <section id="keep-your-code-clean">
                        <h2 data-trans-en="Keep your code clean">Garder son code propre</h2>
                    </section>
                    <section>
                        <h4 data-trans-en="Useless tests">Tests (conditionnel) inutiles</h4>
                        <pre><code class="hljs php" data-trim data-noescape>class Foo { public $id = 1; }

function getFoo(): Foo
{
  return new Foo();
}

$foo = getFoo();

<span class="fragment highlight-red" data-fragment-index="1">if ($foo) {</span>
  var_dump($foo->id);
<span class="fragment highlight-red" data-fragment-index="1">}</span>
                        </code></pre>
                        <div class="fragment error"  data-fragment-index="1">
                            [ERROR] If condition is always true.
                        </div>
                        <aside class="notes">
                            <div data-trans-en="Talking about clean code, you may already encounter this kind of code.">
                                En parlant de code "propre", il est possible que vous ayez d√©j√† rencontr√© ce genre de code.
                            </div>
                            <div data-trans-en='We can do this kind of tests "to be sure", or simply because `getFoo` could return `null` before, but not anymore.'>
                                On peut faire ce genre de test parce que "comme √ßa on est sur" ou bien simplement parce que `getFoo` pouvait retourner `null` avant, mais ce n'est plus le cas.
                            </div>
                            <div data-trans-en="PHPStan will help you keep you code clean here to avoid unecessary tests">
                                PHPStan va ici vous aider √† garder votre code propre en √©vitant les tests inutiles
                            </div>
                        </aside>
                    </section>
                    <section id="casting">
                        <h4 data-trans-en="Useless casting">Conversions inutiles...</h4>
                        <pre><code class="hljs php" data-trim data-noescape>$a = (int) 8 % 3; </code></pre>
                        <div class="error">
                            [ERROR] Casting to int something that's already int.
                        </div>
                        <div class="fragment">
                        <h4>...ou requise !</h4>
                        <pre><code class="hljs php" data-trim data-noescape>function div(int $a, int $b): int {
    return round($a / $b);
}</code></pre>
                        <div class="error">
                            [ERROR] Function div() should return int but returns float.
                        </div>
                        </div>

                        <aside class="notes">
                            <div data-trans-en="We avoid useless casting">
                            On √©vite aussi de caster inutilement.
                            </div>
                            <div data-trans-en="or NOT to cast when needed">
                            Ou de ne pas caster quand c'est requis !
                            </div>
                        </aside>

                    </section>
                </section>

                <section>
                    <section>
                        <h2 data-trans-en="Avoid typos">
                            Eviter les fautes de frappe
                        </h2>
                    </section>
                    <section id="mangopay">
                        <pre><code class="hljs php" data-trim data-noescape><span data-trans-en="// external library">// librairie externe</span>
namespace MangoPay;
class Address {
    public $City;
}

class UserLegal {
    public $Headquarte<span class="fragment highlight-red" data-fragment-index="1">rs</span>Address;
}

<span data-trans-en="// business logic">// code m√©tier</span>
$tmp = new \MangoPay\UserLegal();
$tmp->Headquarte<span class="fragment highlight-red" data-fragment-index="1">r</span>Address = new \MangoPay\Address();
$tmp->Headquarte<span class="fragment highlight-red" data-fragment-index="1">r</span>Address->City = 'Lyon';
                        </code></pre>

                        <div class="fragment error"  data-fragment-index="1">
                            [ERROR] Access to an undefined property MangoPay\UserLegal::$HeadquarterAddress.
                        </div>

                        <aside class="notes">
                            <div data-trans-en="We avoid typos too:">
                            On √©vite les fautes de frappe aussi :
                            </div>
                            <div data-trans-en="PHP allows you to add public properties 'live' to an object and does not send any warning">
                            PHP permet d'ajouter a la vol√©e des propri√©t√©s √† un objet en publique et n'envoie m√™me pas de warning
                            </div>
                            <div data-trans-en="A real example found in our codebase">
                            Un exemple avec de vrai code trouv√© chez nous !
                            </div>
                            <div data-trans-en="‚Ä¶so we lost some data here">
                            Du coup on a perdu quelques donn√©es non enregistr√©e
                            </div>
                        </aside>
                    </section>

                    <section id="get-an-array">
                        <pre><code class="hljs php" data-trim data-noescape>function getAnArray(iterable $iterable) : array
{
    $anArray = [];
    
    foreach ($iterable as $item) {
        $<span class="fragment highlight-red" data-fragment-index="1">get</span>AnArray[] = $item;
    }
    
    return $anArray;
}</code></pre>

                        <div class="fragment error" data-fragment-index="1">
                            Implicit array creation is not allowed - variable $getAnArray might not exist.
                        </div>

                        <aside class="notes">
                            <span data-trans-en="A wrongly named variable">Une variable mal nom√©e !</span><br />
                            <span data-trans-en="For the record, PHP automatically creates a new array">Pour info, php cr√©e automatiquement un nouveau tableau</span><br />
                            <span data-trans-en="under the variable `$getAnArray`">sous la variable `$getAnArray`</span>
                        </aside>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>
                            PHP++
                        </h2>
                    </section>
                    <section id="php-plus-plus">
                        <h4>Docstring</h4>
                        <pre><code class="hljs php" data-trim data-noescape>/**
 * @param array&lt;int&gt; $anArrayOfInt
 */
function doStuff(array $anArrayOfInt) {
  foreach ($anArrayOfInt as $anInt) {
    echo strtoupper($anInt);
  }
}</code></pre>

                        <div class="error" data-fragment-index="1">
                            Parameter #1 $str of function strtoupper expects string, int given.
                        </div>

                        <aside class="notes" data-trans-en="docstring allow us to give more details than the language itself">
                            La docstring permet de donner plus de d√©tail que le language ne sait pas traiter
                        </aside>
                    </section>

                    <section id="multiple-types">
                        <h4>Types multiples</h4>
                        <pre><code class="hljs php" data-trim data-noescape>use Doctrine\Common\Persistence\Collections\Collection;
	
/**
 * @var array&lt;int&gt;|Collection&lt;int&gt; $var
 */
function doStuff($var) {
  if ($var instanceof Collection) {
    $var = $var->toArray();
  }
  
  // `$var` <span data-trans-en="will be known  as an array of int">sera reconnu comme un tableau de int</span>
}</code></pre>

                        <aside class="notes" data-trans-en="Or manage different types">
                            Ou bien m√™me de g√©rer des types diff√©rents
                        </aside>
                    </section>

                    <section id="covariance">
                        <h4>Covariance</h4>
                        <h5>PHP 7.4+</h5>
                        <pre><code class="hljs php" data-trim data-noescape>interface Factory {
    function make(): object;
}

class UserFactory implements Factory {
    function make(): User;
}</code></pre>
                        <h5 data-trans-en="until then">En attendant</h5>
                        <pre><code class="hljs php" data-trim data-noescape>class UserFactory implements Factory {
    /**
     * @return User
     */
    function make(): object;
}</code></pre>

                        <a href="https://wiki.php.net/rfc/covariant-returns-and-contravariant-parameters"
                           target="_blank"
                           rel="noopener noreferer">
                            üîó RFC Covariance / contravariance
                        </a>

                        <aside class="notes">
                            <span data-trans-en="Covariance: more precise return types">
                                Covariance : type de retour plus pr√©cis (User &gt; object)
                            </span><br />
                            <span data-trans-en="Contravariance : function parameter less abstract than the interface one">
                                Contravariance : param√®tre d'entr√©e plus "large" que celui de l'interface
                            </span>
                        </aside>
                    </section>
                </section>

                <section id="benefits">
                    <section
                        data-background-image="images/pirates/IMG_20181209_120358.jpg"
                        data-background-size="cover"
                        data-background-opacity="0.3"
                    >
                        <h2 data-trans-en="Progressive validation">
                            Validation graduelle
                        </h2>

                        <h5 data-trans-en="From level 0 to 7 + additionnal rules">
                            Niveau de 0 √† 7 + r√®gles additionelles
                        </h5>
                    </section>

                    <section
                        data-background-image="images/pirates/IMG_20181209_121240.jpg"
                        data-background-size="cover"
                        data-background-opacity="0.3"
                    >
                        <h2 data-trans-en="PHPStan is fast">
                            PHPStan est rapide
                        </h2>

                        <h5 data-trans-en="700 files in 30 seconds">
                            700 fichiers en 30 secondes
                        </h5>

                        <aside class="notes" data-trans-en="In comparaison, our test stack took 15 minutes">
                            En comparaison, notre suite de tests prend 15 minutes
                        </aside>
                    </section>

                    <section
                        data-background-image="images/pirates/IMG_20181209_120849.jpg"
                        data-background-size="cover"
                        data-background-opacity="0.3"
                    >
                        <h5 data-trans-en="Nothing to do, except write and document (properly) your code">
                            Rien √† faire de plus que d'√©crire et (bien) documenter votre code
                        </h5>
                    </section>
                </section>

                <section id="concurrents">
                    <h2 data-trans-en="Competitors?">Concurrence ?</h2>
                    <p>
                        <img data-src="images/github-mark.png" width="50px" class="image-like-text" />
                        <a href="https://github.com/phan/phan" rel="noopener noreferer" target="_blank">
                            phan/phan
                        </a>
                    </p>

                    <p>
                        <img data-src="images/github-mark.png" width="50px" class="image-like-text" />
                        <a href="https://github.com/vimeo/psalm" rel="noopener noreferer" target="_blank">
                            vimeo/psalm
                        </a>
                    </p>

                    <h5 data-trans-en="Which one should I use?">
                        Lequel utiliser ?
                    </h5>
                    <p>
                        <a href="https://badootech.badoo.com/php-code-static-analysis-based-on-the-example-of-phpstan-phan-and-psalm-a20654c4011d"
                            rel="noopener noreferer"
                            target="_blank"
                            data-trans-en="Comparison from Badoo tech"
                        >
                            Comparatif par Badoo tech
                        </a>
                    </p>

                        <aside class="notes">
                            <li data-trans-en="PHPStan: fast, imple, works with Doctrine, Symfony, etc.">
                                PHPStan : rapide, simple, fonctionne bien avec Doctrine, Symfony, etc.
                            <li data-trans-en="Phan: really efficient, but can give false positive, parse all the code base">
                                Phan : tr√®s efficace, mais peut donner des faux positifs, parse toute la base de code
                            <li data-trans-en="Psalm: advance types (generics)">
                                Psalm : Typage avanc√© (types "generiques")
                        </aside>
                </section>

                <section id="quotes">
                    <section
                        data-background-image="images/pirates/IMG_20181209_121258.jpg"
                        data-background-size="cover"
                        data-background-opacity="0.3"
                    >
                        <h1 data-trans-en="Quotes">
                            Citations
                        </h1>
                        <div data-trans-en="(from my colleagues)">
                            (De mes coll√®gues)
                        </div>
                    </section>

                    <section>
                        <blockquote>
                            <span data-trans-en="At the beginning, I felt both frustrated and really interested. [‚Ä¶]  Stan did regularly force me to face my own mistakes.">
                            Au d√©but, j‚Äôai ressenti un m√©lange de frustration et de grand int√©r√™t. [‚Ä¶] Stan me mets r√©guli√®rement face √† mes manquements.
                            </span>
                            <div class="author">Thomas</div>
                        </blockquote>
                    </section>
                    <section>
                        <blockquote>
                            <span data-trans-en="‚Ä¶a little constraining but weighting the pros and the cons, it was worth it.">
                                ‚Ä¶un peu contraignant mais si on p√®se le pour et le contre √ßa en vaut le d√©tour.
                            </span><br />
                            <span data-trans-en="The time invested was not lost, the code is cleaner now‚Ä¶">
                                L'investissement valait le coup, le code est plus propre‚Ä¶
                            </span>
                            <div class="author">Sylv√®re</div>
                        </blockquote>
                    </section>
                    <section>
                        <blockquote>
                            <span data-trans-en="‚Ä¶bitchy at start when you don't know [‚Ä¶] like when you discover the tests: ">
                                ‚Ä¶ chiant au d√©but quand on connait pas [‚Ä¶] un peu comme quand tu d√©couvres les tests :
                            </span><br />
                            <span data-trans-en='but after several months you deploy you code drinking a little blackcurrant "kir"'>
                                puis quelques mois apr√®s tu lances des deploy en sirotant un petit kir cassis‚Ä¶
                            </span>
                            <div class="author">Dimitri</div>
                        </blockquote>
                    </section>
                </section>

                <section id="questions"
                        data-background-image="images/pirates/IMG_20181209_120217.jpg"
                        data-background-size="cover"
                        data-background-opacity="0.3"
                >
                    <h2 data-trans-en="Thank you!">
                        Merci !
                    </h2>
                    <h3 data-trans-en="Questions?">
                        Des questions ?
                    </h3>

                    <div class="footer">
                        <div>
                            <img data-src="images/github-mark.png" width="50px" class="image-like-text" />
                            <a href="https://github.com/jdeniau" rel="noopener noreferer" target="_blank">
                                jdeniau
                            </a>
                            |
                            <img data-src="images/twitter.png" width="50px" class="image-like-text" />
                            <a href="https://twitter.com/j_deniau" rel="noopener noreferer" target="_blank">
                                j_deniau
                            </a>
                        </div>
                    </div>
                </section>
            </div>
        </div>

    <script type="module" src="./index.ts"></script>

        <script>
function ready(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading"){
        fn();
    } else {
        document.addEventListener('DOMContentLoaded', fn);
    }
}
        </script>
    </body>
</html>
